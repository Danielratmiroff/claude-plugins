[pytest]
# Pytest configuration for claude-dotfiles plugin testing

# Test discovery patterns
# Tests are in the project-level tests/ directory (not distributed with plugins)
# and observability/ at root level
testpaths =
    tests
    observability

python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Recursively discover tests in plugin directories
norecursedirs =
    .git
    .venv
    __pycache__
    *.egg-info
    .pytest_cache
    node_modules

# Test markers for organizing different plugin tests
markers =
    bash_safety: tests for the bash-safety plugin
    notifications: tests for the notifications plugin
    test_runner: tests for the test-runner plugin
    observability: tests for the observability module
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: integration tests that may require external dependencies

# Console output settings
addopts =
    -v
    --tb=short
    --strict-markers
    -ra

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Minimum pytest version
minversion = 7.0

# Coverage configuration (used when pytest-cov is installed)
# Run with: pytest --cov=plugins --cov=observability --cov-report=term-missing
